<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prueba de VibraciÃ³n y Sonido</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f0f0f0;
        }
        .test-btn {
            display: block;
            width: 100%;
            max-width: 300px;
            margin: 10px auto;
            padding: 15px;
            font-size: 18px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            color: white;
        }
        .vibrate-btn { background: #ff6b6b; }
        .sound-btn { background: #4ecdc4; }
        .both-btn { background: #45b7d1; }
        .status {
            text-align: center;
            margin: 20px 0;
            padding: 10px;
            border-radius: 5px;
            background: white;
        }
    </style>
</head>
<body>
    <h1>ğŸ”§ DiagnÃ³stico de VibraciÃ³n y Sonido</h1>
    
    <div class="status" id="status">
        Toca los botones para probar cada funciÃ³n
    </div>
    
    <button class="test-btn vibrate-btn" onclick="testVibration()">
        ğŸ“³ Probar VibraciÃ³n
    </button>
    
    <button class="test-btn sound-btn" onclick="testSound()">
        ğŸ”Š Probar Sonido
    </button>
    
    <button class="test-btn both-btn" onclick="testBoth()">
        ğŸ¯ Probar Ambos
    </button>
    
    <div class="status">
        <h3>ğŸ“‹ Checklist para que funcione:</h3>
        <p>âœ… Usar HTTPS (o localhost)</p>
        <p>âœ… Tocar la pantalla primero (interacciÃ³n del usuario)</p>
        <p>âœ… Activar sonido en el dispositivo</p>
        <p>âœ… No estar en modo silencioso</p>
        <p>âœ… Dar permisos al navegador</p>
    </div>

    <audio id="testAudio" preload="auto">
        <source src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmcfBTCQ1/LNeSoFJHfH8N2QQAoUXrTp66hVFApGn+DyvmcfBTCQ1/LNeSoFJHfH8N2QQAoUXrTp66hVFApGn+DyvmcfBTCQ1/LNeSoFJHfH8N2QQAoUXrTp66hVFApGn+DyvmcfBTCQ1/LNeSoFJHfH8N2QQAoUXrTp66hVFApGn+DyvmcfBTCQ1/LNeSoFJHfH8N2QQAoUXrTp66hVFApGn+DyvmcfBTCQ1/LNeSoFJHfH8N2QQAoUXrTp66hVFApGn+DyvmcfBTCQ1/LNeSoFJHfH8N2QQAoUXrTp66hVFApGn+DyvmcfBTCQ1/LNeSoFJHfH8N2QQAoUXrTp66hVFApGn+DyvmcfBTCQ1/LNeSoFJHfH8N2QQAoUXrTp66hVFApGn+DyvmcfBTCQ1/LNeSoFJHfH8N2QQAoUXrTp66hVFApGn+DyvmcfBTCQ1/LNeSoFJHfH8N2QQAoUXrTp66hVFApGn+DyvmcfBTCQ1/LNeSoFJHfH8N2QQAoUXrTp66hVFApGn+DyvmcfBTCQ1/LNeSoFJHfH8N2QQAoUXrTp66hVFApGn+DyvmcfBTCQ1/LNeSoFJHfH8N2QQAoUXrTp66hVFApGn+DyvmcfBTCQ1/LNeSoFJHfH8N2QQAoUXrTp66hVFApGn+DyvmcfBTCQ1/LNeSoFJHfH8N2QQAoUXrTp66hVFApGn+DyvmcfBTCQ1/LNeSoFJHfH8N2QQAoUXrTp66hVFApGn+DyvmcfBTCQ1/LNeSoFJHfH8N2QQAoUXrTp66hVFApGn+DyvmcfBTCQ1/LNeSoFJHfH8N2QQAoUXrTp66hVFApGn+DyvmcfBTCQ1/LNeSoFJHfH8N2QQAoUXrTp66hVFApGn+DyvmcfBTCQ1/LNeSoFJHfH8N2QQAoUXrTp66hVFApGn+DyvmcfBT" type="audio/wav">
    </audio>

    <script>
        const status = document.getElementById('status');
        const audio = document.getElementById('testAudio');
        
        function updateStatus(message, color = '#333') {
            status.innerHTML = message;
            status.style.color = color;
        }
        
        function testVibration() {
            if ('vibrate' in navigator) {
                // PatrÃ³n: vibrar 500ms, pausa 200ms, vibrar 500ms
                navigator.vibrate([500, 200, 500, 200, 300]);
                updateStatus('ğŸ“³ VibraciÃ³n activada (si tu dispositivo lo soporta)', 'green');
            } else {
                updateStatus('âŒ Tu dispositivo no soporta vibraciÃ³n', 'red');
            }
        }
        
        function testSound() {
            audio.currentTime = 0;
            audio.volume = 0.7;
            audio.play()
                .then(() => {
                    updateStatus('ğŸ”Š Sonido reproducido correctamente', 'green');
                })
                .catch(error => {
                    updateStatus('âŒ Error reproduciendo sonido: ' + error.message, 'red');
                    // Intentar sonido sintÃ©tico
                    createBeep();
                });
        }
        
        function createBeep() {
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.setValueAtTime(800, audioContext.currentTime);
                oscillator.type = 'sine';
                
                gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 1);
                
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 1);
                
                updateStatus('ğŸµ Sonido sintÃ©tico reproducido', 'blue');
            } catch (e) {
                updateStatus('âŒ No se pudo crear sonido sintÃ©tico', 'red');
            }
        }
        
        function testBoth() {
            testVibration();
            setTimeout(testSound, 200); // PequeÃ±o delay para que no interfieran
        }
        
        // InformaciÃ³n del dispositivo
        window.addEventListener('load', () => {
            let info = 'ğŸ“± InformaciÃ³n del dispositivo:<br>';
            info += `VibraciÃ³n: ${navigator.vibrate ? 'âœ… Soportada' : 'âŒ No soportada'}<br>`;
            info += `Audio Context: ${window.AudioContext || window.webkitAudioContext ? 'âœ… Soportado' : 'âŒ No soportado'}<br>`;
            info += `User Agent: ${navigator.userAgent.includes('Mobile') ? 'ğŸ“± MÃ³vil' : 'ğŸ–¥ï¸ Escritorio'}`;
            
            const infoDiv = document.createElement('div');
            infoDiv.className = 'status';
            infoDiv.innerHTML = info;
            document.body.appendChild(infoDiv);
        });
    </script>
</body>
</html>