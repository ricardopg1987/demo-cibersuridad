<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>¡Has sido hackeado!</title>
    <style>
        html, body {
            width: 100vw;
            height: 100vh;
            margin: 0;
            padding: 0;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #111;
            color: #fff;
        }
        .center {
            text-align: center;
            width: 100vw;
            font-family: 'Arial Black', Arial, sans-serif;
            font-size: 2.5em;
            animation: shake 0.4s infinite alternate;
            text-shadow: 0 0 25px #fff, 0 0 50px #0ff, 0 0 70px #f0f, 0 0 100px #ff0;
            letter-spacing: 3px;
            user-select: none;
        }
        @keyframes shake {
            0% { transform: translate(2px, 1px) rotate(1deg);}
            10% { transform: translate(-1px, -2px) rotate(-1deg);}
            20% { transform: translate(-3px, 0px) rotate(1deg);}
            30% { transform: translate(0px, 2px) rotate(0deg);}
            40% { transform: translate(1px, -1px) rotate(1deg);}
            50% { transform: translate(-1px, 2px) rotate(-1deg);}
            60% { transform: translate(-3px, 1px) rotate(0deg);}
            70% { transform: translate(2px, 1px) rotate(-1deg);}
            80% { transform: translate(-1px, -1px) rotate(1deg);}
            90% { transform: translate(2px, 2px) rotate(0deg);}
            100% { transform: translate(1px, -2px) rotate(-1deg);}
        }
        .warning {
            font-size: 0.7em;
            animation: blink 0.5s steps(1, start) infinite;
        }
        @keyframes blink {
            0% { opacity: 1; }
            50% { opacity: 0; }
            100% { opacity: 1; }
        }
    </style>
</head>
<body>
    <div class="center" id="hackText">
        ¡Has sido hackeado!
        <div class="warning">⚠️ ¡No escanees códigos QR desconocidos! ⚠️</div>
    </div>
    <audio id="alarm" src="https://cdn.pixabay.com/audio/2022/07/26/audio_124bfa51d9.mp3" preload="auto"></audio>
    <script src="/socket.io/socket.io.js"></script>
    <script>
        const socket = io();
        let colorInterval = null;
        let vibrateInterval = null;
        let textColorInterval = null;
        let alarmSound = document.getElementById('alarm');
        let hackText = document.getElementById('hackText');

        function flashyColor() {
            const neonColors = [
                '#39ff14','#ff073a','#f6fa0a','#0af0fa','#fd00ff',
                '#fff600','#00ffe7','#ff00c8','#00ff22','#00d0ff'
            ];
            if (Math.random() > 0.5) {
                return neonColors[Math.floor(Math.random() * neonColors.length)];
            }
            const c = () => Math.floor(180 + Math.random()*75);
            return `rgb(${c()},${c()},${c()})`;
        }

        function startDrama() {
            if (!colorInterval) {
                colorInterval = setInterval(() => {
                    document.body.style.background = flashyColor();
                }, 80);
            }
            if (!textColorInterval) {
                textColorInterval = setInterval(() => {
                    hackText.style.color = flashyColor();
                    hackText.style.textShadow = `0 0 30px ${flashyColor()}, 0 0 60px ${flashyColor()}`;
                }, 120);
            }
            if (navigator.vibrate && !vibrateInterval) {
                function doVibrate() { navigator.vibrate([300, 150, 300, 100]); }
                doVibrate();
                vibrateInterval = setInterval(doVibrate, 900);
            }
            if (alarmSound && alarmSound.paused) {
                alarmSound.currentTime = 0;
                alarmSound.loop = true;
                alarmSound.volume = 0.45;
                alarmSound.play().catch(() => {});
            }
        }

        socket.on('startHack', startDrama);
    </script>
</body>
</html>
